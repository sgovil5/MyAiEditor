<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code Editor</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: monospace;
            overflow: hidden;
        }
        #editor {
            height: 100vh;
            width: 100vw;
        }
    </style>
</head>
<body>
    <div id="editor"></div>

    <script src="./ace/ace.js"></script>
    <script src="./ace/mode-javascript.js"></script>
    <script src="./ace/theme-monokai.js"></script>

    <script>
        // Initialize Ace Editor
        const editor = ace.edit("editor");

        // Set editor configuration
        editor.setTheme("ace/theme/monokai");
        editor.session.setMode("ace/mode/javascript");
        editor.setOptions({
            enableBasicAutocompletion: true,
            enableSnippets: true,
            enableLiveAutocompletion: true,
            fontSize: 14,
            wrap: true
        });

        // Set initial value
        editor.setValue("// Start coding here!", -1);

        // Listen for content changes and send to React Native
        editor.session.on('change', function(delta) {
            const content = editor.getValue();
            if (window.ReactNativeWebView) {
                window.ReactNativeWebView.postMessage(JSON.stringify({
                    type: 'change',
                    content: content
                }));
            }
        });

        // Global function to set editor content from React Native
        window.setEditorContent = function(content) {
            editor.setValue(content, -1);
        };

        // Global function to get editor content
        window.getEditorContent = function() {
            return editor.getValue();
        };

        // Notify React Native that editor is ready
        window.addEventListener('load', function() {
            if (window.ReactNativeWebView) {
                window.ReactNativeWebView.postMessage(JSON.stringify({
                    type: 'ready',
                    content: editor.getValue()
                }));
            }
        });

        // Focus editor when page loads
        editor.focus();
    </script>
</body>
</html>
